# 电控通识技能学习流程文档



## 说在前面：



### 通识性知识我们需要会的：

- gpio操作（点灯）
- 中断（定时器、外部）
- PWM控制舵机
- 串口收发（需要简单了解协议解析等）
- 遥控器数据接收
- can控制3510、3508电机
- 3510、3508电机速度闭环（涉及pid调参）
- 电机位置闭环（提供思路，自行研究如何实现）
- rtos建任务执行程序
- bmi088陀螺仪数据读取并解算（mahony）
- 全向轮底盘移动
- 云台陀螺仪闭环
- 整车代码解读

### 知识来源：

1. c板嵌入式开发文档

   - 核心！其余知识来源全都是辅助此文档
   - 内容很多，但很多事不必要的，很多可跳过
   - 不要按顺序学，根据下文的顺序学
   - 有demo代码，在github上，直接照搬可运行，但需要学会怎么用demo而不是直接打开然后烧录

   

2. 天之博特教学视频（很通俗易懂，但很无脑，并且开发环境不一样）
   - 内容很好，作为在有一定基础上可以快速按照视频实现功能
   - 开发环境不一样，需要优先能用明白keil5
   - 课程内容大部分为复现demo，比较推荐但因为开发环境原因需要自行按原理配置keil5
   - 总结：此课程在学会keil5之后按原理复现非常快速，比较推荐，但是需要迈过环境不一样这个坎

3. 中科大教学视频（硬件不一样，说的很详细，RM主要培训视频）

   - 力推课程，但需要在稍微懂一些之后才能继续学习
   - 课程内容很多直接讲实际比赛车的代码，非常好用

4. 队内的电控代码解读视频

   - 在通识性课程学会后，必看
   - 代码写的易读性高
   - 可快速了解整车代码框架运行逻辑，多个任务间是如何配合的

   

### 如何学习：

通过下文的流程逐个学习，以文档为主，其余课程为次，不要一个课程看到底

遇到问题先看demo是如何写的，然后根据代码流程文档进行编写

写代码从来都不是一个照这视频手把手做就能成的事，离开教学视频才是正解

硬性要求：用keil5，在没有完整的掌握通识性知识前禁止使用除keil5之外的其他编译器

## 学习流程



### 步骤1：typora笔记软件使用（优先）

此部分自行在网上学习markdown语法，往后的电控、视觉代码的readme以及任务发布全部为此形式

typora自行破解

### 步骤2：gitdesktop使用（优先）

需要自己找方式进行“翻墙”，大多数的代码及复用模块均托管在github远程仓库上，所有兵种的初始代码框架也已经在github上，感兴趣可自行翻阅。

学习githubdesktop如何新建仓库并连接到仓库，并在此仓库内把之前的所有代码上传到github上，便于日后查找。

### 步骤4：根据

### 步骤4：f103小蓝板（优先）



### 步骤5：c板（待采购到位）



### 工程配置

从新建工程开始P14,到P21，跳过0.4.4keil调试，等学一小部分之后再看

### gpio操作（点灯）

根据文档：RoboMaster开发板C型嵌入式软件教程文档，从1.1点led灯，看到1.4.4,达到效果后，跳过剩下，直接学2.4.4的HAL_Delay和2.4.5，到44页结束

### 中断（定时器、外部）

定时器闪烁led自行实现，根据之前实现的103来复现在c板上

外部中断控制同样，不同的是c板不需要用杜邦线触碰引脚，c板上有按钮，和杜邦线触碰引脚功能一样，根据嵌入式开发手册实现即可（手册的第85页）

### PWM控制舵机

学**5.4.4**的舵机控制，蜂鸣器不用学（用舵机需要插电池，需要看一下我写的那个文档（从c板到其他单片机）里面电源部分1.2.1供电）

### 串口收发，遥控器数据读取（需要简单了解协议解析等）

完整的学一下手册8.串口收发和9.串口打印遥控器数据

不需要学计算波特率

这里需要看中科大电控的串口这节课

实现功能以及printf可以看天之博特的12,13,14这三节课

【从零开始制作RoboMaster步兵机器人-12.串口收发】https://www.bilibili.com/video/BV1D84y1e7ju?vd_source=9b8c6d17ce4bc99224170e66b0369285

### can控制3510、3508电机

根据手册189页开始的14.can控制rm电机，移植例程让电机按照想要的电流大小旋转

看天之博特的课（必须）

这里会使用demo即可，不需要会太详细的原理

### 3510、3508电机速度闭环（涉及pid调参）

手册没有，需要看天之博特的课，在另外一个系列里面，链接如下

【【嵌入式小白的学习之路】9.1 PID控制电机的转速（一）】https://www.bilibili.com/video/BV1tw411D7Mz?vd_source=9b8c6d17ce4bc99224170e66b0369285



### 电机位置闭环（提供思路，自行研究如何实现）

这里提供思路：

之前学会的速度环中，我们通过计算速度误差，然后误差通过pid计算出所需的电流大小然后发送给电机来实现的。

那么位置环同理，想要达到目标位置，电机需要旋转过去才能达到目标位置

既然需要旋转，那么我们就需要控制电机的速度，通过控制速度来控制电机的位置，这是位置环的思路，外环（位置环）计算出位置的误差，经过pid输出目标速度，然后速度环再计算误差，输出电机的电流，从而控制电机位置达到目标速度

重点注意，电机位置闭环时，目标位置先定为4000，因为编码器的性质我们需要做额外的处理，后续会提及如何解决，这里暂时将目标位置定为4000

### rtos建任务执行程序

根据天之博特的课程，会新建任务即可，不需要懂太多，会开任务即可

注意从rtos之后，单片机就有了系统，传统的haldelay延时函数在任务函数中将不可用，阻塞等代码逻辑需要理清

### bmi088陀螺仪数据读取并解算（mahony）



### 全向轮底盘移动

看中科大电控的课程，自行学习

### 云台陀螺仪闭环

面授

### 整车代码解读

看整车代码解读视频

【步兵代码解读】https://www.bilibili.com/video/BV1NbjgzwE3r?vd_source=9b8c6d17ce4bc99224170e66b0369285



# 附录，资料文档链接

上不去github自己想办法

c板的官方例程

https://github.com/RoboMaster/Development-Board-C-Examples

队内整车代码解读视频的配套代码
https://github.com/LTGBLSN/RM2025_infantry_robot

电控学习资料仓库

https://github.com/LTGBLSN/SYUCT_Electronic_Control_Learning_Document

